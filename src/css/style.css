:root {
  /**
   * Sizes
   */
  --size-xs: 0.5rem; /* 8px */
  --size-base: 1rem; /* 16px */
  --size-md: 1.5rem; /* 24px */
  --size-lg: 3rem; /* 48px */
  --size-xl: 4.5rem; /* 72px */
  --size-xxl: 6rem; /* 96px */
  --size-huge: 12rem; /* 192px */

  --block-space-base: 2rem;
  --block-space-lg: 4rem;
  --block-space-xl: 6rem;

  --container-inline-space: var(--size-xl);

  --text-measure: 50rem; /* 800px */
  --linear-measure: var(--text-measure);
  --container-max-width: 80rem; /* 1280px */
  --font-size-small: 1rem;
  --font-size-body: 1.25rem;
  --font-size-title: 2rem;

  /**
   * Colors
   */
  --text-muted: rgba(0, 0, 0, 0.65);
  --gray-light: rgba(0, 0, 0, 0.25);
  --gray-extralight: rgba(0, 0, 0, 0.1);
  --bg-color: white;
  --text-color: black;

  /**
   * Fonts
   */
  --font-sans: "Infini", "Lato", -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Helvetica Neue", "Arial", sans-serif;

  /* https://qwtel.com/posts/software/the-monospaced-system-ui-css-font-stack/ */
  --font-mono: "Fira Code", ui-monospace, "Menlo", "Monaco", "Cascadia Mono", "Segoe UI Mono", "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace", "Source Code Pro", "Fira Mono", "Droid Sans Mono", "Courier New", monospace;
}

/* Less vertical spacing on articles on small screens */
@media (max-width: 350px) {
  :root {
    --size-xxl: 3rem;
    --size-huge: 6rem;
  }
}

@media (min-width: 800px) {
  :root {
    --font-size-small: 1.25rem;
    --font-size-body: 1.375rem;
    --font-size-title: 3rem;
  }
}

/* Fonts
   ========================================================================== */

@font-face {
  font-display: swap;
  font-family: 'Infini';
  font-style: normal;
  font-weight: normal;
  src: url('../fonts/infini/infini-regular.eot');
  src: url('../fonts/infini/infini-regular.eot?#iefix') format('embedded-opentype'), url('../fonts/infini/infini-regular.woff') format('woff'), url('../fonts/infini/infini-regular.woff2') format('woff2'), url('../fonts/infini/infini-regular.ttf') format('truetype'), url('../fonts/infini/infini-regular.svg#svgFontName') format('svg');
}

@font-face {
  font-display: swap;
  font-family: 'Infini';
  font-style: normal;
  font-weight: bold;
  src: url('../fonts/infini/infini-bold.eot');
  src: url('../fonts/infini/infini-bold.eot?#iefix') format('embedded-opentype'), url('../fonts/infini/infini-bold.woff') format('woff'), url('../fonts/infini/infini-bold.woff2') format('woff2'), url('../fonts/infini/infini-bold.ttf') format('truetype'), url('../fonts/infini/infini-bold.svg#svgFontName') format('svg');
}

@font-face {
  font-display: swap;
  font-family: 'Infini';
  font-style: italic;
  font-weight: normal;
  src: url('../fonts/infini/infini-italic.eot');
  src: url('../fonts/infini/infini-italic.eot?#iefix') format('embedded-opentype'), url('../fonts/infini/infini-italic.woff') format('woff'), url('../fonts/infini/infini-italic.woff2') format('woff2'), url('../fonts/infini/infini-italic.ttf') format('truetype'), url('../fonts/infini/infini-italic.svg#svgFontName') format('svg');
}

/* Reset
   ========================================================================== */

html {
  box-sizing: border-box;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

html:focus-within {
  scroll-behavior: smooth;
}

body,
blockquote,
dd,
dl,
figure,
h1,
h2,
h3,
h4,
hr,
ol,
p,
ul {
  margin: 0;
}

picture,
img {
  display: block;
  max-width: 100%;
}

img {
  height: auto;
}

/* `!important` b/c it overrides Prism.js */
code,
pre {
  font-family: var(--font-mono) !important;
  font-size: 0.95em !important;
  margin-block-end: 0 !important;
}

pre {
  overflow-x: auto;
}

@media (prefers-reduced-motion: reduce) {
  html:focus-within {
    scroll-behavior: auto;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Base
   ========================================================================== */

:focus {
  outline: 2px dashed;
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: var(--font-sans);
  font-size: var(--font-size-body);
  line-height: 1.6;
  padding-block-start: var(--size-lg);
  padding-block-end: var(--size-lg);
}

h1,
.h1 {
  font-weight: normal;
}

h2,
.h2 {
  font-size: inherit;
  font-weight: bold;
  line-height: inherit;
}

a {
  color: currentColor;
  padding: 0.5rem;
  margin: -0.5rem;
  text-decoration-skip-ink: auto;
}

a[aria-current],
a.active {
  font-weight: bold;
}

a:hover {
  text-decoration: none;
}

ol li::marker {
  color: var(--text-muted);
}

ul li {
  list-style-type: var(--list-marker-content, "– ");
}

ul li::marker {
  color: var(--gray-light);
  content: var(--list-marker-content, "– ");
}

blockquote {
  border-inline-start: 4px solid var(--gray-light);
  margin-inline-start: var(--size-base);
  padding-inline-start: var(--size-base);
}

hr {
  background-color: var(--gray-light);
  border: none;
  width: 100%;
  height: 2px;
}

/* Layouts
   ========================================================================== */

/*
 * Grid
 * The content col will shrink and grow to a maximum of
 * the `--text-measure` custom property (40rem).
 * When that width is reached, the other column begins expanding (1fr).
 * The max width on the entire grid element, along with `margin-inline: auto`,
 * ensures that it never grows wider than 80rem, and stays centered.
 */
.PageGrid--BOOOOOOOOOO {
  display: grid;
  grid-template-columns:
    [content-start] minmax(0, var(--text-measure)) /* 40rem = 640px */
    [measure] 1fr
    [content-end];
  margin-inline-start: auto;
  margin-inline-end: auto;
  max-width: calc(var(--container-max-width) + (var(--size-lg) * 2)); /* 80rem = 1280px */
  padding-inline-start: var(--size-lg);
  padding-inline-end: var(--size-lg);
}

.PageGrid {
  margin-inline-end: auto;
  margin-inline-start: auto;
  max-width: 1200px;
  padding-inline-end: var(--container-inline-space);
  padding-inline-start: var(--container-inline-space);

  background-color: rgba(0,0,0,0.1);
}

.PageGrid--out > * {
  grid-column: content;
}

.PageHeader__navList {
  display: flex;
  flex-wrap: wrap;
}

.PageHeader__navListItem:first-of-type {
  font-weight: bold;
}

/* Inline padding on every item except for last */
.PageHeader__navListItem:not(:last-of-type) {
  padding-inline-end: var(--size-md);
}

/* Hide dividing slash when screen's so small it wraps to own line */
@media (min-width: 240px) {
  .PageHeader__navListItem:first-of-type {
    padding-inline-start: 0;
    padding-inline-end: 0;
  }

  .PageHeader__navListItem:first-of-type::after {
    content: "/";
    color: var(--gray-light);
    padding-inline-start: calc(var(--size-md) / 2);
    padding-inline-end: calc(var(--size-md) / 2);
  }
}

/**
 * TODO: Make this not need a media query
 */
@media (min-width: 600px) {
  .PageHeader__navList {
    justify-content: flex-end;
  }

  .PageHeader__navListItem:first-of-type {
    margin-inline-end: auto;
    padding-block-end: 0;
  }

  .PageHeader__navListItem:first-of-type::after {
    content: none;
  }
}

.SkipNav {
  text-decoration: underline;
}

.SkipNav:hover {
  text-decoration: none;
}

.SkipNav::after {
  content: " ↷";
}

/* .Intro + .Articles__list {
  margin-block-start: var(--size-xxl);
} */

.Content__header > * + * {
  margin-block-start: var(--size-md);
}

.Content__title {
  font-feature-settings: "case" on;
  font-size: var(--font-size-title);
  hanging-punctuation: first;
  line-height: 1.2;
}

.Content__title > a {
  text-decoration: none;
}

.Content__meta {
  display: flex;
  flex-wrap: wrap;
  color: var(--text-muted);
  font-size: var(--font-size-small);
  font-variant-numeric: lining-nums;
}

.Content__title + .Content__meta {
  margin-block-start: var(--size-xs);
}

/* If meta label is not `visually-hidden`, we need a space after it */
.Content__meta dt:not([class="visually-hidden"])::after {
  content: "\00a0";
}

.Content__meta dd:not(:last-of-type)::after {
  content: "/";
  color: var(--gray-light);
  padding-inline-start: var(--size-xs);
  padding-inline-end: var(--size-xs);
}

.Contain--prose > * {
  max-width: var(--linear-measure);
}

.Contain--prose > pre {
  margin-inline-start: -1em !important;
  margin-inline-end: -1em !important;
  /* TODO: !? */
  width: calc(100vw - 3.05em);
  /* Subtract inline margin pull amount to max width */
  max-width: calc(var(--linear-measure) + 2em);
}

/* Prose
   ========================================================================== */

.Prose {
  hanging-punctuation: first;
  hyphens: auto;
  line-height: inherit;
  word-break: break-word;
}

.Prose > * + * {
  /* margin-block-start: var(--size-md); */
  margin-block-start: var(--block-space-base);
}

/* Extra margin on h2, unless it's the first item in a container */
/* TODO: Or maybe encapsulating in `--article` will suffice */
.Prose--article > h2/*:not(:first-child)*/ {
  margin-block-start: var(--size-lg);
  margin-block-start: var(--size-xxl);
}

.Prose ol,
.Prose ul {
  padding-inline-start: 1em;
}

/* Initially, list items are vertically compressed */
.Prose li:not(:first-child) {
  margin-block-start: var(--size-base);
  /* border: 2px solid red !important; */
}

/* List items in articles are vertically expanded */
.Prose--article li:not(:first-child),
.Prose--article li > ul,
.Prose--article li > ol {
  /* margin-block-start: var(--size-xs); */
  margin-block-start: var(--size-base);
  margin-block-start: var(--block-space-base);
  /* border: 2px solid rebeccapurple !important; */
}

.Prose li > * + * {
  /* margin-block-start: var(--size-xs); */
  margin-block-start: var(--size-base);
  margin-block-start: var(--block-space-base);
}

/* Extra block margin on these elems */
.Prose--article > blockquote,
.Prose--article > figure,
.Prose--article > hr,
.Prose--article > blockquote + :not(h2),
.Prose--article > hr + *,
.Prose--article > figure + :not(h2) {
  margin-block-start: var(--size-lg);
  margin-block-start: var(--block-space-lg);
}

.Prose figcaption {
  margin-block-start: var(--size-base);
}

/* TODO: Test... only want these styles when captioning
an image or video or maybe iframe, but not a blockquote */
.Prose :not(blockquote) + figcaption {
  color: var(--text-muted);
  font-size: var(--font-size-small);
  line-height: 1.5;
}

/* `!important` b/c it overrides Prism.js */
.Prose > pre,
.Prose > pre + * {
  margin-block-start: var(--size-lg) !important;
}

/* Reset block margin on floated figs */
.Prose--article > .align-pull-end,
.Prose--article > .align-pull-end + *,
.Prose--article > .align-pull-start,
.Prose--article > .align-pull-start + * {
  margin-block-start: var(--size-md);
}

.Prose--article > figure + .Content__footer {
  margin-block-start: var(--size-md);
}

/* TODO: Implement multi image rows */

/* Avoid margin staggering on side-by-side photos */
/* .Prose img {
  margin-block-start: 0;
} */

.Prose > .align-full-bleed--BOOOOOOOOOO {
  /* Unset this width limitation from .Prose */
  --linear-measure: auto;
  display: grid;
  grid-template-columns:
    /* Add padding gap to align end right w/ .Prose text */
    [bleed-start] minmax(0, calc(var(--text-measure) + var(--size-lg)))
    [measure] 1fr
    [bleed-end];
  margin-inline-start: calc(var(--size-lg) * -1);
  margin-inline-end: calc(var(--size-lg) * -1);
}

.Prose > .align-full-bleed {
  /* Allow this to span full width of container */
  --linear-measure: auto;
  /* Pull inline margin to bleed with container padding */
  margin-inline-start: calc(var(--container-inline-space) * -1);
  margin-inline-end: calc(var(--container-inline-space) * -1);
}

.Prose > .align-full-bleed > :first-child {
  grid-column: bleed;
}

.Prose > .align-full-bleed > figcaption {
  /* Add inline padding to offset container padding */
  padding-inline-end: var(--container-inline-space);
  padding-inline-start: var(--container-inline-space);
}

@media (min-width: 440px) {
  .Prose > .align-end,
  .Prose > .align-pull-end,
  .Prose > .align-pull-start,
  .Prose > .align-start {
    /* Set minimum width of 250px */
    /* width: max(250px, 33%); */
    min-width: var(--min-width, 250px);
    max-width: var(--max-width, 33%);
  }

  .Prose > .align-end,
  .Prose > .align-pull-end {
    float: inline-end;
    margin-inline-start: var(--size-lg);
  }

  .Prose > .align-pull-end--BOOOOOOOOOO {
    margin-inline-end: calc(var(--size-lg) * -1);
  }

  .Prose > .align-pull-end {
    margin-inline-end: calc(var(--container-inline-space) * -1);
  }

  .Prose > .align-start,
  .Prose > .align-pull-start {
    float: inline-start;
    margin-inline-end: var(--size-lg);
  }

  /* Pull figure into page gutter padding area */
  .Prose > .align-pull-start {
    margin-inline-start: calc(var(--container-inline-space) * -1);
  }
}

.Prose--article > .photo-row {
  display: grid;
  gap: var(--size-base);
  /* Get --columns property from HTML to decide how many to display */
  grid-template-columns: repeat(var(--columns, 2), 1fr);
}

/* Specific pages/layouts
  ========================================================================== */

/* Extra margin on first element following header on single article pages */
.Layout--article .Content__header + * {
  margin-block-start: var(--size-xxl);
}

/* Reading/Books
   ========================================================================== */

.ReadingGrid > h2 {
  font-variant-numeric: lining-nums;
}

@media (min-width: 700px) {
  .ReadingGrid {
    display: grid;
    column-gap: var(--size-lg);
    grid-template-columns: 1fr 2fr;
  }

  .ReadingGrid > h2 {
    align-self: start;
    position: sticky;
    inset-block-start: var(--size-lg);
  }
}

.NavInline__list {
  align-items: baseline;
  display: flex;
  flex-wrap: wrap;
  hyphens: none;
  word-break: normal;
}

.NavInline__listItem {
  flex-basis: auto;
  /* flex-grow: 1; */
  margin-block-start: 0 !important;
}

.NavInline__listItem:first-of-type {
  padding-inline-end: var(--size-xs);
}

.NavInline__listItem:not(:last-of-type):not(:first-of-type)::after {
  content: "/";
  color: var(--gray-light);
  padding-inline-start: var(--size-xs);
  padding-inline-end: var(--size-xs);
}
