---
layout: layouts/base.njk
title: I like to read books
---
{# How do you list all posts grouped by year? - https://github.com/11ty/eleventy/issues/1284 #}
<style>
:-moz-broken { outline: solid red }
</style>
<section class="Grid Article space-items-lg">
  <h1>{{ title }}</h1>
  {% include "snippets/books-submenu.njk" %}
  {#<p>Iâ€™ve been drawing the books I read (or listen to) since the beginning of 2020. You can <a href="/books-ive-read/">view my reading list as plain text</a> if loading all these images is an issue.</p>#}
</section>

{#
 # 2. Refactoring
 #}
<section class="mt-lg" style="display: grid; grid-template-columns: repeat(100, 1fr); grid-column-gap: 8px; grid-row-gap: 0; align-items: end; max-width: 90%; margin-left: auto; margin-right: auto;">
  {% for book in collections.booksRead %}
    {# See if the spreadsheet says this book has a drawing #}
    {% if book.gsx$drawing.$t == "TRUE" %}
      {%- set bookTitle -%}{{ book.gsx$title.$t }}{%- endset -%}
      {% set imgSrc %}/images/books/{{ book.gsx$slug.$t }}.png{% endset %}
      {%- set widthPercent -%}{{ ((book.gsx$width.$t * 1) + 3) | round(0, "ceil") }}{%- endset -%}
      <style>
      @media (min-width: 1000px) {
        {# .book { padding-right: 1em; } #}
        .book--px.book-{{ loop.index }} {
          width: calc({{ widthPx }} * 17px);
        }
        .book--percent.book-{{ loop.index }} {
          width: {{ widthPercent }}%;
        }
      }
      </style>
      <figure class="book book--percent" style="grid-column-end: span {{ widthPercent }};">
        <img alt="" src="{{ imgSrc | url | safe }}">
      </figure>
    {% endif %}
  {% endfor %}
</section>

{#
 # 1. Grid version I had previously
 #}
{# <h2>Grid version</h2> #}
{# <section style="display: grid; grid-template-columns: repeat(100, 1fr); grid-column-gap: 8px; grid-row-gap: 0; align-items: end; max-width: 90%; margin-left: auto; margin-right: auto;">
  {% for book in collections.booksRead %}
    <!-- See if the spreadsheet says this book has a drawing -->
    {% if book.gsx$drawing.$t == "TRUE" %}
      {% set imgSrc %}/images/books/{{ book.gsx$slug.$t }}.png{% endset %}
      {% set width %}{{ (book.gsx$width.$t * 1) + 3 }}{% endset %}
      {% set width %}{{ width | round(0, "ceil") }}{% endset %}
      <figure style="grid-column-end: span {{ width }};">
        <img alt="" src="{{ imgSrc | url | safe }}">
      </figure>
    {% endif %}
  {% endfor %}
</section> #}
